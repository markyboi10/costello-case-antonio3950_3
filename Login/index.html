<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Link Bootstrap CSS -->
    <link href="bootstrap.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap-grid.css" rel="stylesheet">
    <!-- Link Custom CSS-->
    <link href="style.css" rel="stylesheet">

    <!-- Link Bootstrap and JQuery JS -->
    <script src="jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <!-- Origin Policy Links -->
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="Cross-Origin-Opener-Policy" content="*">
    <!-- Google OAuth script -->
    <script type="text/javascript" src="GoogleOAuth.js" defer></script>
    <!-- Proj. Title -->
    <title>WebDevProj4</title>

</head>

<!-- HTML content goes here -->

<body data-vide-bg="piggy">

    <div class="container-fluid">

        <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh">
            <form id='loginForm' class="rounded p-5 bg-light  col-lg-6 col-md-9 col-sm-12 ">
                <div class="text-center mb-4 custom-font-size">
                    <h>
                        Log In
                    </h>
                </div>
                <div class="mb-3">
                    <label class="visually-hidden">Email Address</label>
                    <input type="email" id="emailAddress" class="form-control" placeholder="Email Address" required
                        autofocus onfocusout="checkEmail('emailAddress')">
                </div>
                <div id="emailError" class="error-message"></div>
                <div id="successMessage" class="success-message"></div>
                <div class="d-grid gap-2">
                    <button id="loginButton" type="button" class="btn btn-primary fw-bolder">Log in</button>
                </div>
                <div>
                    <div id="sign-in-container" class="mt-3">
                        <div id="g_id_onload"
                            data-client_id="951325617358-20v7s22jr35ahu01qdoeg0onh7hagu37.apps.googleusercontent.com"
                            data-context="signin" data-ux_mode="popup" data-callback="CredentialHandling"
                            data-auto_prompt="false">
                        </div>

                        <div class="d-flex justify-content-center align-items-center">
                            <div class="g_id_signin" data-type="standard" data-shape="pill" data-theme="filled_black"
                                data-text="continue_with" data-size="large" data-width="200"
                                data-logo_alignment="center">
                            </div>
                        </div>
                    </div>

                    <div class="border-top my-3 mt-4 mb-4"></div>

                    <div class="d-grid gap-2 col-6 mx-auto">
                        <button onclick="clearLoginFields()" id="createAccountBtn" type="button"
                            class="btn btn-success fw-bolder">Create New
                            Account</button>
                    </div>
                </div>
            </form>

            <form id="signupForm" class="rounded p-5 bg-light  col-lg-6 col-md-9 col-sm-12" style="display: none;">
                <div class="text-center mb-4 custom-font-size">
                    <h>
                        Sign Up
                    </h>
                </div>
                <div class="mb-3">
                    <label class="visually-hidden">Email Address</label>
                    <input type="email" id="signupEmail" class="form-control" placeholder="Email Address" required
                        autofocus onfocusout="checkEmail('signupEmail')">
                </div>
                <div class="d-grid gap-2">
                    <button id="signUpButton" onclick="checkPassword()" type="button"
                        class="btn btn-primary fw-bolder">Sign up</button>
                </div>
                <div class="d-grid gap-2 col-6 mx-auto mt-3">
                    <button onclick="clearSingUpFields()" id="backBtn" type="button"
                        class="btn btn-danger fw-bolder">Back</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Script Tags -->
    <script>
        // Decode JWT(Google OAuth)
        function CredentialHandling(response) {
            decodeJwtResponse(response.credential);
            decodeAllUsers();
        }

        // On click, decode the log in email address and check if it exists. If not, error out
        document.getElementById('loginButton').addEventListener('click', function () {
            decodeLoginFormResponse();
            decodeAllUsers();
        });
        // On click, decode the sign up email address and check if it doesn't exists. If it does exist, error out
        document.getElementById('signUpButton').addEventListener('click', function () {
            decodeSignUpResponse();
            decodeAllUsers();
        });
    </script>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="GoogleOAuth.js"></script>
    <script src="jquery.min.js"></script>
    <script src="jquery.vide.js"></script>
    <script src="Toogle.js"></script>
    <script src="allUsers.js"></script>
</body>

</html>